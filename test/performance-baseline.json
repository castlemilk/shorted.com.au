{
  "performance_baseline": {
    "version": "1.0.0",
    "last_updated": "2024-12-20",
    "description": "Performance baseline metrics for shorted.com.au API endpoints",
    "test_environment": {
      "database": "PostgreSQL on Supabase",
      "server": "Go 1.23 with Connect RPC",
      "infrastructure": "Google Cloud Run",
      "cache": "In-memory caching enabled"
    }
  },
  
  "endpoints": {
    "GetTopShorts": {
      "endpoint": "/shorts.v1alpha1.ShortedStocksService/GetTopShorts",
      "description": "Returns top short positions for specified period",
      "baseline_metrics": {
        "response_time_ms": {
          "p50": 200,
          "p95": 500,
          "p99": 1000,
          "max_acceptable": 2000
        },
        "throughput": {
          "requests_per_second": 100,
          "target_rps": 150,
          "max_sustainable_rps": 300
        },
        "error_rate": {
          "target_percentage": 1.0,
          "max_acceptable_percentage": 5.0
        },
        "resource_usage": {
          "memory_mb": 50,
          "cpu_percentage": 15,
          "database_connections": 2
        }
      },
      "parameter_variations": {
        "period_1w": {
          "p95_ms": 300,
          "expected_data_size_kb": 20
        },
        "period_1m": {
          "p95_ms": 400,
          "expected_data_size_kb": 80
        },
        "period_3m": {
          "p95_ms": 600,
          "expected_data_size_kb": 200
        },
        "period_6m": {
          "p95_ms": 800,
          "expected_data_size_kb": 400
        },
        "period_1y": {
          "p95_ms": 1200,
          "expected_data_size_kb": 1000
        }
      },
      "load_test_thresholds": {
        "light_load_10_rps": {
          "p95_ms": 400,
          "error_rate_max": 0.5
        },
        "medium_load_50_rps": {
          "p95_ms": 600,
          "error_rate_max": 2.0
        },
        "heavy_load_100_rps": {
          "p95_ms": 1000,
          "error_rate_max": 5.0
        }
      }
    },
    
    "GetStock": {
      "endpoint": "/shorts.v1alpha1.ShortedStocksService/GetStock",
      "description": "Returns stock summary for specific product code",
      "baseline_metrics": {
        "response_time_ms": {
          "p50": 100,
          "p95": 300,
          "p99": 600,
          "max_acceptable": 1000
        },
        "throughput": {
          "requests_per_second": 200,
          "target_rps": 300,
          "max_sustainable_rps": 500
        },
        "error_rate": {
          "target_percentage": 0.5,
          "max_acceptable_percentage": 2.0
        },
        "resource_usage": {
          "memory_mb": 20,
          "cpu_percentage": 8,
          "database_connections": 1
        }
      },
      "cache_effectiveness": {
        "cache_hit_rate_target": 80,
        "cached_response_time_p95_ms": 50,
        "cache_miss_response_time_p95_ms": 300
      },
      "popular_stocks_performance": {
        "description": "Performance for frequently requested stocks (CBA, BHP, ANZ, WBC, NAB)",
        "p95_ms": 200,
        "cache_hit_rate": 90
      }
    },
    
    "GetStockData": {
      "endpoint": "/shorts.v1alpha1.ShortedStocksService/GetStockData",
      "description": "Returns historical time series data for stock",
      "baseline_metrics": {
        "response_time_ms": {
          "p50": 500,
          "p95": 1500,
          "p99": 3000,
          "max_acceptable": 5000
        },
        "throughput": {
          "requests_per_second": 50,
          "target_rps": 75,
          "max_sustainable_rps": 100
        },
        "error_rate": {
          "target_percentage": 1.0,
          "max_acceptable_percentage": 3.0
        },
        "resource_usage": {
          "memory_mb": 100,
          "cpu_percentage": 25,
          "database_connections": 3
        }
      },
      "period_based_performance": {
        "period_1w": {
          "p95_ms": 800,
          "expected_data_points": 7,
          "data_size_kb": 5
        },
        "period_1m": {
          "p95_ms": 1200,
          "expected_data_points": 30,
          "data_size_kb": 20
        },
        "period_3m": {
          "p95_ms": 2000,
          "expected_data_points": 90,
          "data_size_kb": 60
        },
        "period_6m": {
          "p95_ms": 3000,
          "expected_data_points": 180,
          "data_size_kb": 120
        },
        "period_1y": {
          "p95_ms": 4500,
          "expected_data_points": 365,
          "data_size_kb": 250
        }
      }
    },
    
    "GetStockDetails": {
      "endpoint": "/shorts.v1alpha1.ShortedStocksService/GetStockDetails",
      "description": "Returns detailed stock metadata and information",
      "baseline_metrics": {
        "response_time_ms": {
          "p50": 150,
          "p95": 400,
          "p99": 800,
          "max_acceptable": 1500
        },
        "throughput": {
          "requests_per_second": 150,
          "target_rps": 200,
          "max_sustainable_rps": 300
        },
        "error_rate": {
          "target_percentage": 0.5,
          "max_acceptable_percentage": 2.0
        },
        "resource_usage": {
          "memory_mb": 30,
          "cpu_percentage": 12,
          "database_connections": 2
        }
      }
    },
    
    "GetIndustryTreeMap": {
      "endpoint": "/shorts.v1alpha1.ShortedStocksService/GetIndustryTreeMap",
      "description": "Returns industry treemap visualization data",
      "baseline_metrics": {
        "response_time_ms": {
          "p50": 800,
          "p95": 2000,
          "p99": 4000,
          "max_acceptable": 8000
        },
        "throughput": {
          "requests_per_second": 25,
          "target_rps": 40,
          "max_sustainable_rps": 60
        },
        "error_rate": {
          "target_percentage": 2.0,
          "max_acceptable_percentage": 5.0
        },
        "resource_usage": {
          "memory_mb": 150,
          "cpu_percentage": 40,
          "database_connections": 5
        }
      },
      "complexity_variations": {
        "simple_query": {
          "limit": 10,
          "period": "1m",
          "p95_ms": 1500
        },
        "medium_query": {
          "limit": 25,
          "period": "3m",
          "p95_ms": 2500
        },
        "complex_query": {
          "limit": 50,
          "period": "6m",
          "p95_ms": 4000
        }
      }
    }
  },
  
  "system_level_metrics": {
    "database_performance": {
      "connection_pool": {
        "max_connections": 20,
        "target_utilization": 70,
        "max_utilization": 90
      },
      "query_performance": {
        "avg_query_time_ms": 50,
        "p95_query_time_ms": 200,
        "slow_query_threshold_ms": 1000
      },
      "connection_handling": {
        "acquisition_time_p95_ms": 10,
        "max_acquisition_time_ms": 100
      }
    },
    
    "cache_performance": {
      "overall_hit_rate": 75,
      "target_hit_rate": 80,
      "cache_response_time_p95_ms": 10,
      "cache_memory_usage_mb": 100,
      "cache_eviction_rate_per_minute": 10
    },
    
    "memory_usage": {
      "baseline_mb": 100,
      "peak_acceptable_mb": 512,
      "gc_pause_target_ms": 10,
      "memory_allocation_rate_mb_per_second": 50
    },
    
    "cpu_usage": {
      "baseline_percentage": 10,
      "target_percentage": 30,
      "max_acceptable_percentage": 80
    }
  },
  
  "load_test_scenarios": {
    "concurrent_users": {
      "10_users": {
        "description": "Light concurrent load",
        "max_error_rate": 1.0,
        "p95_degradation_factor": 1.2
      },
      "50_users": {
        "description": "Medium concurrent load",
        "max_error_rate": 3.0,
        "p95_degradation_factor": 1.5
      },
      "100_users": {
        "description": "High concurrent load",
        "max_error_rate": 5.0,
        "p95_degradation_factor": 2.0
      },
      "200_users": {
        "description": "Stress level concurrent load",
        "max_error_rate": 10.0,
        "p95_degradation_factor": 3.0
      }
    },
    
    "sustained_load": {
      "duration_minutes": 15,
      "steady_rps": 50,
      "performance_drift_threshold": 1.3,
      "error_rate_stability": 2.0
    },
    
    "spike_test": {
      "baseline_users": 50,
      "spike_users": [200, 400, 800],
      "spike_duration_seconds": 120,
      "recovery_time_target_seconds": 60,
      "max_error_rate_during_spike": 15.0
    }
  },
  
  "benchmark_test_targets": {
    "GetTopShorts_benchmark": {
      "ops_per_second_target": 5000,
      "memory_allocs_per_op": 50,
      "bytes_allocated_per_op": 5000
    },
    
    "GetStock_benchmark": {
      "ops_per_second_target": 8000,
      "memory_allocs_per_op": 30,
      "bytes_allocated_per_op": 3000
    },
    
    "GetStockData_benchmark": {
      "ops_per_second_target": 2000,
      "memory_allocs_per_op": 100,
      "bytes_allocated_per_op": 15000
    },
    
    "database_query_benchmark": {
      "simple_query_ops_per_second": 10000,
      "complex_query_ops_per_second": 1000,
      "connection_acquisition_ns": 1000000
    }
  },
  
  "sla_targets": {
    "availability": 99.9,
    "response_time_sla": {
      "p95_under_2_seconds": 95,
      "p99_under_5_seconds": 99
    },
    "throughput_sla": {
      "min_requests_per_second": 100,
      "peak_requests_per_second": 500
    },
    "error_rate_sla": {
      "max_error_rate_percentage": 1.0,
      "max_5xx_error_rate_percentage": 0.1
    }
  },
  
  "monitoring_alerts": {
    "response_time_alerts": {
      "warning_p95_ms": 1500,
      "critical_p95_ms": 3000
    },
    "error_rate_alerts": {
      "warning_percentage": 2.0,
      "critical_percentage": 5.0
    },
    "throughput_alerts": {
      "warning_rps_below": 75,
      "critical_rps_below": 50
    },
    "database_alerts": {
      "connection_pool_utilization_warning": 80,
      "connection_pool_utilization_critical": 95,
      "slow_query_threshold_ms": 2000
    }
  },
  
  "test_data_requirements": {
    "stock_codes": [
      "CBA", "BHP", "ANZ", "WBC", "NAB", "CSL", "WOW", "TLS", "RIO", "WES",
      "MQG", "TCL", "STO", "QBE", "WPL", "ALL", "JHX", "COL", "ILU", "REA"
    ],
    "periods": ["1w", "1m", "3m", "6m", "1y", "2y"],
    "limits": [5, 10, 25, 50, 100],
    "view_modes": ["CURRENT_CHANGE", "PERCENTAGE_CHANGE"],
    "minimum_data_range": "2024-01-01 to present",
    "data_completeness_requirement": 95
  },
  
  "regression_test_criteria": {
    "performance_regression_threshold": 1.2,
    "memory_regression_threshold": 1.3,
    "error_rate_regression_threshold": 2.0,
    "cache_hit_rate_degradation_threshold": 0.9
  }
}