config: {AppSpec:{Insecure:true Port:9091 ShortsStoreConfig:{StorageBackend:postgres DynamoDBRegion: DynamoDBTable: DynamoDBEndpoint: PostgresAddress:localhost:5438 PostgresUsername:admin PostgresPassword:password PostgresDatabase:shorts}} OpsSpec:{Version:dev Commit:dirty Port:8082 Logging:{Level:info}}}2025-10-06T19:00:29.053+1030	INFO	log/log.go:49	starting server server at :9091
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 10, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=10, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get stock: CBA
2025/10/06 19:00:31 [DEBUG] cache miss for GetStock, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetStock: product_code=CBA, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get stock: BHP
2025/10/06 19:00:31 [DEBUG] cache miss for GetStock, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetStock: product_code=BHP, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [ERROR] validation failed for GetStock: invalid_argument: product code must be 3-4 uppercase letters (e.g., CBA, ZIP)
2025/10/06 19:00:31 [ERROR] validation failed for GetStock: invalid_argument: product code is required
2025/10/06 19:00:31 [DEBUG] get stock data: product_code=CBA, period=1M
2025-10-06T19:00:31.911+1030	INFO	log/log.go:49	Generated Query: 
		SELECT date_trunc('day', "DATE") as interval_start, 
		       AVG("PERCENT_OF_TOTAL_PRODUCT_IN_ISSUE_REPORTED_AS_SHORT_POSITIONS") as avg_percent
		FROM shorts
		WHERE "PRODUCT_CODE" = $1
		  AND "DATE" > CURRENT_DATE - INTERVAL '6 month'
		  AND "PERCENT_OF_TOTAL_PRODUCT_IN_ISSUE_REPORTED_AS_SHORT_POSITIONS" IS NOT NULL
		GROUP BY interval_start
		ORDER BY interval_start ASC
2025/10/06 19:00:31 [ERROR] database error in GetStockData: product_code=CBA, period=1M, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get stock data: product_code=BHP, period=6M
2025-10-06T19:00:31.913+1030	INFO	log/log.go:49	Generated Query: 
		SELECT date_trunc('day', "DATE") as interval_start, 
		       AVG("PERCENT_OF_TOTAL_PRODUCT_IN_ISSUE_REPORTED_AS_SHORT_POSITIONS") as avg_percent
		FROM shorts
		WHERE "PRODUCT_CODE" = $1
		  AND "DATE" > CURRENT_DATE - INTERVAL '6 month'
		  AND "PERCENT_OF_TOTAL_PRODUCT_IN_ISSUE_REPORTED_AS_SHORT_POSITIONS" IS NOT NULL
		GROUP BY interval_start
		ORDER BY interval_start ASC
2025/10/06 19:00:31 [ERROR] database error in GetStockData: product_code=BHP, period=6M, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get stock data: product_code=WBC, period=1Y
2025-10-06T19:00:31.914+1030	INFO	log/log.go:49	Generated Query: 
		SELECT date_trunc('day', "DATE") as interval_start, 
		       AVG("PERCENT_OF_TOTAL_PRODUCT_IN_ISSUE_REPORTED_AS_SHORT_POSITIONS") as avg_percent
		FROM shorts
		WHERE "PRODUCT_CODE" = $1
		  AND "DATE" > CURRENT_DATE - INTERVAL '6 month'
		  AND "PERCENT_OF_TOTAL_PRODUCT_IN_ISSUE_REPORTED_AS_SHORT_POSITIONS" IS NOT NULL
		GROUP BY interval_start
		ORDER BY interval_start ASC
2025/10/06 19:00:31 [ERROR] database error in GetStockData: product_code=WBC, period=1Y, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [ERROR] validation failed for GetStockData: invalid_argument: product code must be 3-4 uppercase letters (e.g., CBA, ZIP)
2025/10/06 19:00:31 [ERROR] validation failed for GetStockData: invalid_argument: product code is required
2025/10/06 19:00:31 [ERROR] validation failed for GetStockData: invalid_argument: invalid period format. Valid periods: 1D, 1W, 1M, 3M, 6M, 1Y
2025/10/06 19:00:31 [ERROR] validation failed for GetTopShorts: invalid_argument: invalid period format. Valid periods: 1D, 1W, 1M, 3M, 6M, 1Y
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 5, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=5, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 1, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=1, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 10, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=10, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 5, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=5, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 100, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=100, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 10, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 10, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 10, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 10, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 10, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 10, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 10, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 10, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 10, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [DEBUG] get top shorts, period: 1M, limit: 10, offset: 0
2025/10/06 19:00:31 [DEBUG] cache miss for GetTopShorts, fetching from database
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=10, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=10, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=10, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=10, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=10, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=10, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=10, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=10, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=10, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
2025/10/06 19:00:31 [ERROR] database error in GetTopShorts: period=1M, limit=10, offset=0, err=failed to connect to `host=localhost user=admin database=shorts`: dial error (dial tcp 127.0.0.1:5438: connect: connection refused)
signal: killed
